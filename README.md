# CommunityService-Spring
# SNS 프로젝트

## url
1. /  
- 유저가 로그인한지 확인하여 로그인 화면과 홈화면을 보여준다.
2. /add
- Get으로 요청이 오면 회원가입 뷰를 보여준다.
- Post로 요청이 오면 작성한 폼을 확인하여 적절할 경우 회원가입을 진행한다.
3. /login
- Get: 로그인 뷰를 보여준다.
- Post: 작성한 폼을 확인하여 적절할 경우 로그인을 진행한다.
- 로그인의 경우 세션에 저장하고 redirect가 필요하다면 해당 페이지로 redirect 한다.
- 인터셉터를 사용하여 로그인하지 않은 유저는 허용되지 않은 페이지로 이동이 불가능하다. 따라서 로그인페이지로 가도록 하고 원하는 페이지는 로그인 후 redirect 할 수 있도록 한다.
4. /logout
- Get, Post 모두 이 url 요청이 들어오면 세션을 파기하고 로그아웃하며 원래 페이지인 /로 돌아가도록 한다.
5. /profile
- Get: 로그인 유저의 정보를 model에 담아 view로 보여준다.
- Post: /로 돌아간다.(홈 버튼)
6. /profile/edit
- Get:유저가 자신의 정보를 수정하는 페이지로 가도록 한다.
- Post: 작성한 폼을 확인하여 적절한 경우 자신의 정보를 수정하도록 한다.
7. /profile/drop
- Get: 로그인한 유저와 관련된 모든 정보를 삭제한다.(유저 정보, 포스팅, 메시지, 팔로우 등등) 그리고 로그아웃하여 홈 화면 / 로 가도록 한다.
8. /posting
- Get: 현재 등록되어 있는 모든 포스팅 정보를 불러와 model에 담아서 view로 보여준다. 포스팅은 작성된 시간 기준으로 정렬되어 보여준다.
- Post: /profile의 Post와 같이 홈화면에 대한 클릭 요청이다.
9. /posting/add
- Get: 로그인한 유저가 포스팅을 등록할 수 있도록 뷰를 보여준다.
- Post: 포스팅 제목, 내용등이 제대로 입력되었는지 확인하고, 이미지가 있을 경우 이미지와 함께 포스팅으로 저장한다. 제대로 저장되면 /posting으로 redirect한다.
10. /posting/search/postingId
- Get: 유저의 이름으로 검색하는 뷰를 보여준다.
- Post: 입력받은 내용을 포함하는 이름의 모든 유저가 작성한 포스팅을 검색하여 뷰로 보여준다.(substring, ex : '길' -> '홍길', '길동', '홍길동', '길', ...) 
- url 수정 예정 -> /posting/search/name
11. /posting/search/content
- Get: 포스팅의 내용으로 검색하는 뷰를 보여준다.
- Post: 입력받은 내용을 포함하는 포스팅을 모두 검색하여 뷰로 보여준다.
12. /posting/edit/{postingId}
- Get: 포스팅 편집을 누르면 해당 포스팅의 id가 path variable로 포함되어 요청한다. 이때 자신이 작성한 포스팅이 아니면 수정이 불가능하고, 자신이 작성했다면 수정 페이지로 이동한다. 수정 페이지는 원래 포스팅 내용과 수정할 폼을 같이 보여준다.
- Post: 전송받은 폼의 내용을 저장 가능한지 확인한다. 저장가능한 경우 원래 게시물을 삭제하고, 전송받은 내용으로 대체하여 게시글을 등록한다.
13. /posting/comment/{postingId}
- Get: 포스팅의 댓글달기를 누르면 해당 포스팅의 id가 path variable로 포함되어 요청한다. 해당하는 포스팅과 댓글을 찾아 model에 담아 뷰로 보여준다.
- Post: 포스팅의 댓글을 폼으로 전송받아 저장한다. 저장한 내용을 포함하여 뷰로 보여준다.
14. /posting/comment/remove/{postingId}/{commentId}
- Get: 포스팅 id와 댓글 id를 path variable로 포함하여 요청한다. 댓글의 작성자이거나, 포스팅 작성자인 경우 해당 댓글을 삭제할 수 있다. 삭제한 이후 나머지 댓글을 뷰로 보여준다.
15. /posting/edit/remove/{postingId}
- Get: 해당하는 포스팅을 삭제하는 요청이다. 포스팅, 사진, 좋아요, 댓글 모두 삭제한다.
16. /like/{postingId}
- Get: 해당하는 게시글에 좋아요를 누르는 기능이다.
17. /follow
- Get: 현재 팔로우 현황을 보여준다. 내가 팔로우 하는 사람과, 회원가입했지만 내가 팔로우 하지 않는 사람으로 구분하여 보여준다.
- Post: 홈화면을 클릭하는 요청이다. 홈화면으로 돌아간다.
18. /unfollowToFollow/{followId}
- Get: 팔로우하지 않는 사람을 팔로우하는 기능이다. 언팔로우 상태의 사람이 팔로우가 되어 보여준다.
19. /followToUnfollow/{followId}
- Get: 현재 팔로우 하는 사람을 끊는 요청이다. 팔로우 상태의 사람이 언팔로우가 되어 보여준다.
20. /directmessage
- Get: 현재 팔로우 중인 사람들의 목록을 보여준다. 팔로우 중인 사람에게만 메시지를 보낼 수 있고, 상대방이 나를 팔로우 중이어야 내가 보낸 메시지를 확인할 수 있다.
- Post: 홈화면 버튼을 클릭하는 요청이다. 홈화면으로 돌아간다.
21. /directmessage/{receiverId}
- Get: 원하는 사람에게 메시지 보내기 버튼을 클릭한 상황이다. 해당 유저와 메시지를 주고받은 결과를 뷰로 보여준다. 보낸 시간순으로 정렬되어 있으며, 오른쪽은 내가, 왼쪽은 상대방이 보낸 메시지를 의미한다.
- Post: 상대방 유저에게 메시지를 보내는 기능이다.
22. Rest API
- 모든 url 앞에 /api를 추가하면 Rest Api가 동작하는 url이 된다. 모든 정보를 보내지 않기 위해 Dto를 활용하여 필요한 데이터만 보내게 구현하였다.

## 사용 기술
JAVA, Spring boot, JPA, mysql, AWS EC2, AWS RDS, Thymeleaf

## 아쉬운점 및 개선점
- 비밀번호 저장시 암호화 필요
- JPA를 사용할때 cascade type으로 인한 연쇄적인 DB처리가 아니라 직접 JPQL로 처리한 것이 너무 많다 -> 중복쿼리 호출이 너무 많다
- 소셜 로그인 부재 -> oauth 사용
- 세션 로그인 방식의 한계 : 확장성을 고려할 때 토큰 방식(ex : jwt)을 활용한 로그인을 구현하는 것이 나을 것 같다.
- 게시판 페이지네이션 : 많은 사용자가 이용할 경우 한꺼번에 모든 데이터를 불러오는 것이 불가능하다. 몇개씩 조회하여 보여주는 페이지네이션이 필요할 것 같다.
- 메시지기능이 실시간이 아니라 새로고침이 필요하다 -> 웹소켓 활용 방안 모색
- Rest Api로 전환할때 Http method 활용 방식이 잘못되었다. 모든 url을 Get, Post로만 처리한 것은 분명 잘못된 방식이다.
- Rest Api의 에러처리 : 에러코드에 대한 처리가 미흡하다.
- Web Server의 부재 : Web Server가 존재하지 않아 View를 보내는등 간단한 일을 처리하는 것 조차 WAS가 담당해야 한다. nginx같은 Web Server를 활용하는 것이 좋을것 같다.
- 스레드 처리 : 여러 사용자가 동시에 접속할 경우에 대비하여 모든 처리는 멀티스레딩으로 진행해야 안정적일 것 같다.
- 테스트코드 : 현재 테스트코드를 작성하지 않아 직접 모든것을 해보는 방법밖에 없다. 테스트 코드 작성도 진행해야 할 것 같다.
- 커밋 로그 : 커밋 메시지가 일정하지 않다. 다른 규칙을 정해서 일정하게 하는 것이 나을 것 같다.
- 해시태그 : SNS인 만큼, 해시태그 기능이 추가되면 더 좋을 것 같다.
